{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Build Hello",
            "command":"nvcc",
            "args": ["-arch","sm_89","./csrc/hello.cu","-o","./build/hello"],
            "group": "build"
        },
        {
            "label": "Run Hello",
            "type": "shell",
            "command": "./build/hello",
            "group": "build",
            "dependsOn":["Build Hello"]
        },
        // Add Vector
        {
            "label": "Build AddVector",
            "command":"nvcc",
            "args": ["-arch","sm_89","./csrc/addVector.cu","-o","./build/addVector"],
            "group": "build"
        },
        {
            "label": "Run AddVector",
            "type": "shell",
            "command": "./build/addVector ${input:nElem} ${input:blockdim} ",
            "group": "build",
            "dependsOn":["Build AddVector"]
        },
        {
            "label": "Profile AddVector",
            "type": "shell",
            "command": "ncu ./build/addVector ${input:nElem} ${input:blockdim} ",
            "group": "build",
            "dependsOn":["Build AddVector"]
        },
        // Simple Divergence
        {
            "label": "Build Simple Divergence",
            "command":"nvcc",
            "args": ["-arch","sm_89","-g","-G","./csrc/simpleDivergence.cu","-o","./build/simpleDivergence"],
            "group": "build"
        },
        {
            "label": "Run Simple Divergence",
            "type": "shell",
            "command": "./build/simpleDivergence ${input:nElem} ${input:blockdim} ",
            "group": "build",
            "dependsOn":["Build Simple Divergence"]
        },
        {
            "label": "Profile Simple Divergence",
            "type": "shell",
            "command": "ncu -o ./profile/simpleDivergence ./build/simpleDivergence ${input:nElem} ${input:blockdim} ",
            "group": "build",
            "dependsOn":["Build Simple Divergence"]
        },
        {
            "label": "Metric Profile Simple Divergence",
            "command":"ncu",
            "args": [
                "--metric","branch_inst_executed,smsp__branch_targets_threads_uniform,smsp__branch_targets_threads_divergent,smsp__sass_average_branch_targets_threads_uniform.pct,gpu__time_duration.sum",
                "./build/simpleDivergence","${input:nElem}", "${input:blockdim}"
            ],
            "group": "build",
            "dependsOn":["Build Simple Divergence"]
        },
        // Device Property
        {
            "label": "Build Device Property",
            "command":"nvcc",
            "args": ["-arch","sm_89","-g","-G","./csrc/deviceQuery.cu","-o","./build/deviceQuery","-I..","-lcuda"],
            "group": "build"
        },
        {
            "label": "Run Device Property",
            "type": "shell",
            "command": "./build/deviceQuery",
            "group": "build",
            "dependsOn":["Build Device Property"]
        },
    ],
    "inputs": [
        {
            "type": "pickString",
            "id": "blockdim",
            "description": "Blockdim in x axis",
            "options":["1","2","4","8","16","32","64","128","256","512","1024"]
        },
        {
            "type": "pickString",
            "id": "nElem",
            "description": "Number of Element in the Array",
            "options": [
                "16777216",    // 2^24
                "128",
                "64",
                "4",
                "2"
            ]
        }
    ]
}